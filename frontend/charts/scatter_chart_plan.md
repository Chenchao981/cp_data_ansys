# 散点图功能实现计划

## 📊 任务2.2：实现散点图 - 参数关联分析

### 🎯 **功能目标**
- **图表类型**：散点图 (Scatter Plot)
- **用途**：参数关联分析，显示两个或多个参数之间的相关性
- **数据源**：cleaned.csv + spec.csv
- **输出**：交互式散点图，支持参数选择和规格限制标示

### 📁 **文件结构**
```
frontend/charts/
├── scatter_chart.py          # 散点图实现类
├── scatter_chart_app.py      # Streamlit散点图应用
├── scatter_chart.md          # 功能说明文档
└── scatter_chart_plan.md     # 任务规划文档(本文件)
```

### 🔧 **子任务拆分**

#### **子任务2.2.1：创建ScatterChart基础类** ⏱️ 2小时
- **文件**：`scatter_chart.py`
- **功能**：
  - 继承BaseChart基类
  - 实现load_required_data()方法，加载cleaned.csv数据
  - 实现generate()方法，生成基础散点图
  - 支持X轴、Y轴参数选择
  - 数据验证和异常处理

#### **子任务2.2.2：集成Spec规格限制** ⏱️ 1.5小时
- **功能**：
  - 加载spec.csv规格数据
  - 在散点图中标示合格/不合格区域
  - 支持规格上下限的可视化
  - 高亮显示超规格数据点

#### **子任务2.2.3：增强图表功能** ⏱️ 1小时
- **功能**：
  - 支持多参数组合分析
  - 颜色编码（按批次、规格状态等）
  - 趋势线拟合（可选）
  - 相关系数计算和显示

#### **子任务2.2.4：创建Streamlit应用** ⏱️ 1.5小时
- **文件**：`scatter_chart_app.py`
- **功能**：
  - 交互式参数选择器
  - 实时图表更新
  - 批次选择功能
  - 图表导出功能

#### **子任务2.2.5：编写文档和测试** ⏱️ 1小时
- **文件**：`scatter_chart.md`
- **功能**：
  - 使用说明文档
  - 代码测试和调试
  - 性能优化

### 💾 **数据结构设计**

#### **cleaned.csv 数据格式**
```
LotID, WaferID, DieX, DieY, Parameter1, Parameter2, ..., ParameterN
FA54-5339, W01, 1, 1, 12.5, 8.3, ..., 156.7
```

#### **spec.csv 规格格式**
```
Parameter, LSL, USL, Target, Unit
Parameter1, 10.0, 15.0, 12.5, mA
Parameter2, 7.0, 9.0, 8.0, V
```

### 🎨 **图表设计要求**

#### **基础散点图**
- X轴：选定参数1
- Y轴：选定参数2  
- 点大小：可配置
- 颜色：按状态编码（合格/不合格）

#### **规格限制可视化**
- 规格边界框：半透明矩形
- 超规格点：红色高亮
- 合格点：绿色或蓝色

#### **交互功能**
- 参数选择下拉框
- 批次过滤器
- 缩放和平移
- 数据点悬停信息

### 🔄 **复用现有架构**

#### **继承关系**
```python
BaseChart (基类)
├── LineChart (已完成)
└── ScatterChart (待实现)
```

#### **复用组件**
- **数据管理**：`csv_adapter.py`, `csv_processor.py`
- **文件操作**：`file_utils.py`
- **数据验证**：`data_validator.py`
- **基础架构**：`base_chart.py`

### ✅ **验收标准**

1. **功能完整性**：
   - [ ] 支持任意两参数的散点图生成
   - [ ] 正确显示规格限制区域
   - [ ] 数据点状态正确标示

2. **交互性**：
   - [ ] Streamlit应用界面友好
   - [ ] 参数选择器正常工作
   - [ ] 图表实时更新

3. **性能**：
   - [ ] 大数据量下响应流畅（>10K数据点）
   - [ ] 图表生成时间<3秒

4. **健壮性**：
   - [ ] 异常数据处理
   - [ ] 文件缺失容错
   - [ ] 参数验证完善

### 🚀 **开发顺序**
1. 子任务2.2.1 → 子任务2.2.2 → 子任务2.2.3 → 子任务2.2.4 → 子任务2.2.5

### 📝 **备注**
- 优先实现核心功能，交互功能可后续迭代
- 保持与现有LineChart的接口一致性
- 考虑后续扩展到3D散点图的可能性

---
**创建时间**: 2025-01-23  
**预计工期**: 1天  
**优先级**: 高 